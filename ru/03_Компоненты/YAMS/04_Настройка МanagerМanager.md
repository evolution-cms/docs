
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<h3>Yams: Настройка ManagerManager </h3> 
Настройка ManagerManager для модуля Yams для создания многоязычных сайтов на MODX Evolution.	
<br>
<p>Независимо от того, что используется, в файле с правилами или чанке с правилами в конце надо прописать:</p>
<pre class="brush: php;">require ($modx->config['base_path'] . 'assets/modules/yams/yams.mm_rules.inc.php' );</pre>
<p>Собственно, YAMS готов к работе.</p>
<p>В «Инструментах» > «Конфигурации» включить Дружественные URL, разрешить вложенные URL, также использовать в связке с предыдущим параметром повторяющиеся псевдонимы, тогда путь до документа в адресной строке будет выглядеть:</p>
<p>site.com/en/catalogue/home-video</p>
<p>site.com/ru/catalogue/home-video</p>
<h4>Настройка:</h4>
<p>Во вкладке «Модули» > «YAMS» лежат все настройки.</p>
<h4>Настройка языков:</h4>
<p><img title="yls" src="assets/files/yams/yls1.jpg.html"></p>
<p>Собственно, исчерпывающая страница, на которой показаны языки и как их добавлять. Теги, названия для отображения в самом же языке, в других языка, выбор письма справа налево или наоборот, теги (нужны для вызовов сниппета YAMS, обозначение, группы), системное название языка, имя сервера система подставляет автоматически. Set Default – поставить язык по умолчанию, чтобы с него открывался сайт.</p>
<p>Дальше идёт настройка сервера, после того, как созданы все необходимые языки, YAMS создаёт правила, которые надо вписать в .htaccess, чтобы правильно работали пути и редиректы.</p>
<p>Это находится на следующей вкладке:</p>
<p><img src="assets/files/yams/ysc.jpg.html"></p>
<p>Всё содержимое из этой вкладки просто скопировать в .htaccess</p>
<h4>Другие настройки:</h4>
<p><img src="assets/files/yams/yop.jpg.html"></p>
<p>Эта вкладка содержит множество настроек будущего сайта. Такие, как типы редиректов, находится ли сайт в поддиректории или в корневой папке, разбивать ли языки при редактировании документов на табы, либо пускать списком на одной странице. По умолчанию сейчас стоит разбивка на табы, это и удобней, редиректы выставлены тоже по умолчанию нормально.</p>
<p>Последняя вкладка: Multilingual Templates</p>
<p>Нужна для того, чтобы YAMS перекраивал панель редактирования под многоязычный сайт.</p>
<p>YAMS заменяет стандартные поля Pagetitle, Longtitle, Content итд TV-параметрами с окончанием _ru, _en итд, то бишь, чтобы Pagetitle страницы был привязан именно к языку и полное название TV-параметра тогда выглядит pagetitle_ru.</p>
<p>Как только создаётся новый шаблон, во вкладке Multilingual Templates надо ему присвоить статус многоязычного.</p>
<p>Также можно создавать новые TV-параметры с нужным окончанием, они автоматически будут переноситься в соответствующий таб языков.</p>
<p>Не рекомендуется, даже больше, нельзя убирать поле Internal Name, оно нужно для отображения названия документа в дереве слева.</p>
<p>Создание шаблона:</p>
<p>Стандартный шаблон без дополнительных вызовов других сниппетов. YAMS автоматически определяет такие поля, как [*pagetitle*], [*longtitle*], [*content*]. То есть, достаточно вставить их в шаблон, сделать во вкладке Multilingual Templates шаблон многоязычным и при редактировании документа заполнить эти поля для каждого языка, при переключении языков на сайте, они будут меняться.</p>
<p>Механизм переключения языков:</p>
<p>Создаётся, например, чанк Languages, ставится в нужном месте в шаблоне и в чанк записывается:</p>
<p>[[YAMS? &get=`repeat` &repeattpl=`lang_tpl` &amp;currenttpl=`current_lang_tpl`]]</p>
<pre class="brush: html;">&repeattpl=`lang_tpl` – шаблон кнопки языка</pre>
<pre class="brush: html;">&amp;currenttpl=`current_lang_tpl` – шаблон кнопки текущего языка</pre>
<p>Шаблон lang_tpl выглядит, например, вот так:</p>
<pre class="brush: html;"><a href="(yams_docr).html" rel="nofollow">(yams_name)</a></pre>
<p>(yams_docr) – ссылка, сгенерированная до текущей страницы в этом или остальных языках</p>
<p>(yams_name) – имя языка, вписанное в табе Модули > Yams > Language Settings</p>
<p>&amp;currenttpl – шаблон выбранного языка. Тоже самое, только можно добавить class="selected", ну, или что по вкусу, чтобы язык был виден, как текущий.</p>
<p>Точно таким же образом можно подставить и флажки вместо текста.</p>